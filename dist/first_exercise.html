<!doctype html>
<html lang="en-US">

<head>
    <meta charset="utf-8" />
    <title>UK Accidents Dashboard</title>
  <script type="module" crossorigin>var qe=Object.defineProperty;var Re=(t,e,n)=>e in t?qe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var p=(t,e,n)=>Re(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();class Fe{constructor(e){p(this,"container");this.container=e}addEntry(e,n){const r=document.createElement("div");r.classList.add("legend-entry");const i=document.createElement("div");i.style.backgroundColor=e;const o=document.createElement("p");o.textContent=n.name;const s=document.createElement("button");s.textContent="X",s.addEventListener("click",()=>{document.dispatchEvent(new CustomEvent("deselection",{detail:{color:e,data:n}})),r.remove()}),r.append(i,o,s),this.container.append(r)}}async function He(t){const e=new Array,r=(await t.text()).split(`
`);for(let i=0;i<r.length;++i){if(i==0)continue;const o=r[i].split(",");e.push({name:o[0],economy:Number(o[1]),cylinders:Number(o[2]),displacement:Number(o[3]),power:Number(o[4]),weight:Number(o[5]),speed:Number(o[6]),year:Number(o[7])})}return e}function it(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ie(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function jt(t){let e,n,r;t.length!==2?(e=it,n=(a,c)=>it(t(a),c),r=(a,c)=>t(a)-c):(e=t===it||t===Ie?t:Ve,n=t,r=t);function i(a,c,l=0,u=a.length){if(l<u){if(e(c,c)!==0)return u;do{const h=l+u>>>1;n(a[h],c)<0?l=h+1:u=h}while(l<u)}return l}function o(a,c,l=0,u=a.length){if(l<u){if(e(c,c)!==0)return u;do{const h=l+u>>>1;n(a[h],c)<=0?l=h+1:u=h}while(l<u)}return l}function s(a,c,l=0,u=a.length){const h=i(a,c,l,u-1);return h>l&&r(a[h-1],c)>-r(a[h],c)?h-1:h}return{left:i,center:s,right:o}}function Ve(){return 0}function De(t){return t===null?NaN:+t}const Oe=jt(it),Be=Oe.right;jt(De).center;function C(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of t)(o=e(o,++i,t))!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}const Ue=Math.sqrt(50),Xe=Math.sqrt(10),Ge=Math.sqrt(2);function ot(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=Ue?10:o>=Xe?5:o>=Ge?2:1;let a,c,l;return i<0?(l=Math.pow(10,-i)/s,a=Math.round(t*l),c=Math.round(e*l),a/l<t&&++a,c/l>e&&--c,l=-l):(l=Math.pow(10,i)*s,a=Math.round(t/l),c=Math.round(e/l),a*l<t&&++a,c*l>e&&--c),c<a&&.5<=n&&n<2?ot(t,e,n*2):[a,c,l]}function Ye(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,s]=r?ot(e,t,n):ot(t,e,n);if(!(o>=i))return[];const a=o-i+1,c=new Array(a);if(r)if(s<0)for(let l=0;l<a;++l)c[l]=(o-l)/-s;else for(let l=0;l<a;++l)c[l]=(o-l)*s;else if(s<0)for(let l=0;l<a;++l)c[l]=(i+l)/-s;else for(let l=0;l<a;++l)c[l]=(i+l)*s;return c}function mt(t,e,n){return e=+e,t=+t,n=+n,ot(t,e,n)[2]}function Ke(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?mt(e,t,n):mt(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function G(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function zt(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function te(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function $t(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ee(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function W(){}var K=.7,st=1/K,U="\\s*([+-]?\\d+)\\s*",Z="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",z="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ze=/^#([0-9a-f]{3,8})$/,Qe=new RegExp(`^rgb\\(${U},${U},${U}\\)$`),We=new RegExp(`^rgb\\(${z},${z},${z}\\)$`),Je=new RegExp(`^rgba\\(${U},${U},${U},${Z}\\)$`),je=new RegExp(`^rgba\\(${z},${z},${z},${Z}\\)$`),tn=new RegExp(`^hsl\\(${Z},${z},${z}\\)$`),en=new RegExp(`^hsla\\(${Z},${z},${z},${Z}\\)$`),Lt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$t(W,Q,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:qt,formatHex:qt,formatHex8:nn,formatHsl:rn,formatRgb:Rt,toString:Rt});function qt(){return this.rgb().formatHex()}function nn(){return this.rgb().formatHex8()}function rn(){return ne(this).formatHsl()}function Rt(){return this.rgb().formatRgb()}function Q(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ze.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Ft(e):n===3?new $(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?et(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?et(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Qe.exec(t))?new $(e[1],e[2],e[3],1):(e=We.exec(t))?new $(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Je.exec(t))?et(e[1],e[2],e[3],e[4]):(e=je.exec(t))?et(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=tn.exec(t))?Vt(e[1],e[2]/100,e[3]/100,1):(e=en.exec(t))?Vt(e[1],e[2]/100,e[3]/100,e[4]):Lt.hasOwnProperty(t)?Ft(Lt[t]):t==="transparent"?new $(NaN,NaN,NaN,0):null}function Ft(t){return new $(t>>16&255,t>>8&255,t&255,1)}function et(t,e,n,r){return r<=0&&(t=e=n=NaN),new $(t,e,n,r)}function on(t){return t instanceof W||(t=Q(t)),t?(t=t.rgb(),new $(t.r,t.g,t.b,t.opacity)):new $}function xt(t,e,n,r){return arguments.length===1?on(t):new $(t,e,n,r??1)}function $(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}$t($,xt,ee(W,{brighter(t){return t=t==null?st:Math.pow(st,t),new $(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?K:Math.pow(K,t),new $(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new $(I(this.r),I(this.g),I(this.b),at(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ht,formatHex:Ht,formatHex8:sn,formatRgb:It,toString:It}));function Ht(){return`#${H(this.r)}${H(this.g)}${H(this.b)}`}function sn(){return`#${H(this.r)}${H(this.g)}${H(this.b)}${H((isNaN(this.opacity)?1:this.opacity)*255)}`}function It(){const t=at(this.opacity);return`${t===1?"rgb(":"rgba("}${I(this.r)}, ${I(this.g)}, ${I(this.b)}${t===1?")":`, ${t})`}`}function at(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function I(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function H(t){return t=I(t),(t<16?"0":"")+t.toString(16)}function Vt(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new S(t,e,n,r)}function ne(t){if(t instanceof S)return new S(t.h,t.s,t.l,t.opacity);if(t instanceof W||(t=Q(t)),!t)return new S;if(t instanceof S)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,c=(o+i)/2;return a?(e===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-e)/a+2:s=(e-n)/a+4,a/=c<.5?o+i:2-o-i,s*=60):a=c>0&&c<1?0:s,new S(s,a,c,t.opacity)}function an(t,e,n,r){return arguments.length===1?ne(t):new S(t,e,n,r??1)}function S(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}$t(S,an,ee(W,{brighter(t){return t=t==null?st:Math.pow(st,t),new S(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?K:Math.pow(K,t),new S(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new $(ht(t>=240?t-240:t+120,i,r),ht(t,i,r),ht(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new S(Dt(this.h),nt(this.s),nt(this.l),at(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=at(this.opacity);return`${t===1?"hsl(":"hsla("}${Dt(this.h)}, ${nt(this.s)*100}%, ${nt(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Dt(t){return t=(t||0)%360,t<0?t+360:t}function nt(t){return Math.max(0,Math.min(1,t||0))}function ht(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Et=t=>()=>t;function cn(t,e){return function(n){return t+n*e}}function ln(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function un(t){return(t=+t)==1?re:function(e,n){return n-e?ln(e,n,t):Et(isNaN(e)?n:e)}}function re(t,e){var n=e-t;return n?cn(t,n):Et(isNaN(t)?e:t)}const Ot=function t(e){var n=un(e);function r(i,o){var s=n((i=xt(i)).r,(o=xt(o)).r),a=n(i.g,o.g),c=n(i.b,o.b),l=re(i.opacity,o.opacity);return function(u){return i.r=s(u),i.g=a(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=t,r}(1);function fn(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function hn(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function dn(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=kt(t[s],e[s]);for(;s<n;++s)o[s]=e[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function gn(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function ct(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function pn(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=kt(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var yt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dt=new RegExp(yt.source,"g");function mn(t){return function(){return t}}function xn(t){return function(e){return t(e)+""}}function yn(t,e){var n=yt.lastIndex=dt.lastIndex=0,r,i,o,s=-1,a=[],c=[];for(t=t+"",e=e+"";(r=yt.exec(t))&&(i=dt.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,c.push({i:s,x:ct(r,i)})),n=dt.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?c[0]?xn(c[0].x):mn(e):(e=c.length,function(l){for(var u=0,h;u<e;++u)a[(h=c[u]).i]=h.x(l);return a.join("")})}function kt(t,e){var n=typeof e,r;return e==null||n==="boolean"?Et(e):(n==="number"?ct:n==="string"?(r=Q(e))?(e=r,Ot):yn:e instanceof Q?Ot:e instanceof Date?gn:hn(e)?fn:Array.isArray(e)?dn:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?pn:ct)(t,e)}function _n(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function wn(t){return function(){return t}}function vn(t){return+t}var Bt=[0,1];function T(t){return t}function _t(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:wn(isNaN(e)?NaN:.5)}function bn(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Mn(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=_t(i,r),o=n(s,o)):(r=_t(r,i),o=n(o,s)),function(a){return o(r(a))}}function An(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=_t(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(a){var c=Be(t,a,1,r)-1;return o[c](i[c](a))}}function ie(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function oe(){var t=Bt,e=Bt,n=kt,r,i,o,s=T,a,c,l;function u(){var f=Math.min(t.length,e.length);return s!==T&&(s=bn(t[0],t[f-1])),a=f>2?An:Mn,c=l=null,h}function h(f){return f==null||isNaN(f=+f)?o:(c||(c=a(t.map(r),e,n)))(r(s(f)))}return h.invert=function(f){return s(i((l||(l=a(e,t.map(r),ct)))(f)))},h.domain=function(f){return arguments.length?(t=Array.from(f,vn),u()):t.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),u()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),n=_n,u()},h.clamp=function(f){return arguments.length?(s=f?!0:T,u()):s!==T},h.interpolate=function(f){return arguments.length?(n=f,u()):n},h.unknown=function(f){return arguments.length?(o=f,h):o},function(f,d){return r=f,i=d,u()}}function $n(){return oe()(T,T)}function En(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function lt(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function X(t){return t=lt(Math.abs(t)),t?t[1]:NaN}function kn(t,e){return function(n,r){for(var i=n.length,o=[],s=0,a=t[0],c=0;i>0&&a>0&&(c+a+1>r&&(a=Math.max(1,r-c)),o.push(n.substring(i-=a,i+a)),!((c+=a+1)>r));)a=t[s=(s+1)%t.length];return o.reverse().join(e)}}function Nn(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Sn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ut(t){if(!(e=Sn.exec(t)))throw new Error("invalid format: "+t);var e;return new Nt({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ut.prototype=Nt.prototype;function Nt(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Nt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Cn(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var se;function Pn(t,e){var n=lt(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(se=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+lt(t,Math.max(0,e+o-1))[0]}function Ut(t,e){var n=lt(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Xt={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:En,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Ut(t*100,e),r:Ut,s:Pn,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Gt(t){return t}var Yt=Array.prototype.map,Kt=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Tn(t){var e=t.grouping===void 0||t.thousands===void 0?Gt:kn(Yt.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?Gt:Nn(Yt.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function l(h){h=ut(h);var f=h.fill,d=h.align,m=h.sign,E=h.symbol,b=h.zero,M=h.width,_=h.comma,y=h.precision,A=h.trim,x=h.type;x==="n"?(_=!0,x="g"):Xt[x]||(y===void 0&&(y=12),A=!0,x="g"),(b||f==="0"&&d==="=")&&(b=!0,f="0",d="=");var q=E==="$"?n:E==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",N=E==="$"?r:/[%p]/.test(x)?s:"",V=Xt[x],D=/[defgprs%]/.test(x);y=y===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function R(g){var v=q,w=N,O,Tt,J;if(x==="c")w=V(g)+w,g="";else{g=+g;var j=g<0||1/g<0;if(g=isNaN(g)?c:V(Math.abs(g),y),A&&(g=Cn(g)),j&&+g==0&&m!=="+"&&(j=!1),v=(j?m==="("?m:a:m==="-"||m==="("?"":m)+v,w=(x==="s"?Kt[8+se/3]:"")+w+(j&&m==="("?")":""),D){for(O=-1,Tt=g.length;++O<Tt;)if(J=g.charCodeAt(O),48>J||J>57){w=(J===46?i+g.slice(O+1):g.slice(O))+w,g=g.slice(0,O);break}}}_&&!b&&(g=e(g,1/0));var tt=v.length+g.length+w.length,L=tt<M?new Array(M-tt+1).join(f):"";switch(_&&b&&(g=e(L+g,L.length?M-w.length:1/0),L=""),d){case"<":g=v+g+w+L;break;case"=":g=v+L+g+w;break;case"^":g=L.slice(0,tt=L.length>>1)+v+g+w+L.slice(tt);break;default:g=L+v+g+w;break}return o(g)}return R.toString=function(){return h+""},R}function u(h,f){var d=l((h=ut(h),h.type="f",h)),m=Math.max(-8,Math.min(8,Math.floor(X(f)/3)))*3,E=Math.pow(10,-m),b=Kt[8+m/3];return function(M){return d(E*M)+b}}return{format:l,formatPrefix:u}}var rt,ae,ce;zn({thousands:",",grouping:[3],currency:["$",""]});function zn(t){return rt=Tn(t),ae=rt.format,ce=rt.formatPrefix,rt}function Ln(t){return Math.max(0,-X(Math.abs(t)))}function qn(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(X(e)/3)))*3-X(Math.abs(t)))}function Rn(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,X(e)-X(t))+1}function Fn(t,e,n,r){var i=Ke(t,e,n),o;switch(r=ut(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=qn(i,s))&&(r.precision=o),ce(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Rn(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Ln(i))&&(r.precision=o-(r.type==="%")*2);break}}return ae(r)}function le(t){var e=t.domain;return t.ticks=function(n){var r=e();return Ye(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Fn(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,s=r[i],a=r[o],c,l,u=10;for(a<s&&(l=s,s=a,a=l,l=i,i=o,o=l);u-- >0;){if(l=mt(s,a,n),l===c)return r[i]=s,r[o]=a,e(r);if(l>0)s=Math.floor(s/l)*l,a=Math.ceil(a/l)*l;else if(l<0)s=Math.ceil(s*l)/l,a=Math.floor(a*l)/l;else break;c=l}return t},t}function P(){var t=$n();return t.copy=function(){return ie(t,P())},te.apply(t,arguments),le(t)}function Zt(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Hn(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function In(t){return t<0?-t*t:t*t}function Vn(t){var e=t(T,T),n=1;function r(){return n===1?t(T,T):n===.5?t(Hn,In):t(Zt(n),Zt(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},le(e)}function ue(){var t=Vn(oe());return t.copy=function(){return ie(t,ue()).exponent(t.exponent())},te.apply(t,arguments),t}function Dn(){return ue.apply(null,arguments).exponent(.5)}class fe{constructor(e){p(this,"container");p(this,"width");p(this,"height");this.container=e,setTimeout(this.handler.bind(this),0),window.addEventListener("resize",this.handler.bind(this))}handler(){this.width=this.container.clientWidth,this.height=this.container.clientHeight,this.resize()}resize(){}}var wt="http://www.w3.org/1999/xhtml";const Qt={svg:"http://www.w3.org/2000/svg",xhtml:wt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function he(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Qt.hasOwnProperty(e)?{space:Qt[e],local:t}:t}function On(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===wt&&e.documentElement.namespaceURI===wt?e.createElement(t):e.createElementNS(n,t)}}function Bn(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function St(t){var e=he(t);return(e.local?Bn:On)(e)}function Un(){}function de(t){return t==null?Un:function(){return this.querySelector(t)}}function Xn(t){typeof t!="function"&&(t=de(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=new Array(s),c,l,u=0;u<s;++u)(c=o[u])&&(l=t.call(c,c.__data__,u,o))&&("__data__"in c&&(l.__data__=c.__data__),a[u]=l);return new k(r,this._parents)}function Gn(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Yn(){return[]}function Kn(t){return t==null?Yn:function(){return this.querySelectorAll(t)}}function Zn(t){return function(){return Gn(t.apply(this,arguments))}}function Qn(t){typeof t=="function"?t=Zn(t):t=Kn(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s=e[o],a=s.length,c,l=0;l<a;++l)(c=s[l])&&(r.push(t.call(c,c.__data__,l,s)),i.push(c));return new k(r,i)}function Wn(t){return function(){return this.matches(t)}}function ge(t){return function(e){return e.matches(t)}}var Jn=Array.prototype.find;function jn(t){return function(){return Jn.call(this.children,t)}}function tr(){return this.firstElementChild}function er(t){return this.select(t==null?tr:jn(typeof t=="function"?t:ge(t)))}var nr=Array.prototype.filter;function rr(){return Array.from(this.children)}function ir(t){return function(){return nr.call(this.children,t)}}function or(t){return this.selectAll(t==null?rr:ir(typeof t=="function"?t:ge(t)))}function sr(t){typeof t!="function"&&(t=Wn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],c,l=0;l<s;++l)(c=o[l])&&t.call(c,c.__data__,l,o)&&a.push(c);return new k(r,this._parents)}function pe(t){return new Array(t.length)}function ar(){return new k(this._enter||this._groups.map(pe),this._parents)}function ft(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ft.prototype={constructor:ft,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function cr(t){return function(){return t}}function lr(t,e,n,r,i,o){for(var s=0,a,c=e.length,l=o.length;s<l;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new ft(t,o[s]);for(;s<c;++s)(a=e[s])&&(i[s]=a)}function ur(t,e,n,r,i,o,s){var a,c,l=new Map,u=e.length,h=o.length,f=new Array(u),d;for(a=0;a<u;++a)(c=e[a])&&(f[a]=d=s.call(c,c.__data__,a,e)+"",l.has(d)?i[a]=c:l.set(d,c));for(a=0;a<h;++a)d=s.call(t,o[a],a,o)+"",(c=l.get(d))?(r[a]=c,c.__data__=o[a],l.delete(d)):n[a]=new ft(t,o[a]);for(a=0;a<u;++a)(c=e[a])&&l.get(f[a])===c&&(i[a]=c)}function fr(t){return t.__data__}function hr(t,e){if(!arguments.length)return Array.from(this,fr);var n=e?ur:lr,r=this._parents,i=this._groups;typeof t!="function"&&(t=cr(t));for(var o=i.length,s=new Array(o),a=new Array(o),c=new Array(o),l=0;l<o;++l){var u=r[l],h=i[l],f=h.length,d=dr(t.call(u,u&&u.__data__,l,r)),m=d.length,E=a[l]=new Array(m),b=s[l]=new Array(m),M=c[l]=new Array(f);n(u,h,E,b,M,d,e);for(var _=0,y=0,A,x;_<m;++_)if(A=E[_]){for(_>=y&&(y=_+1);!(x=b[y])&&++y<m;);A._next=x||null}}return s=new k(s,r),s._enter=a,s._exit=c,s}function dr(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function gr(){return new k(this._exit||this._groups.map(pe),this._parents)}function pr(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function mr(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),c=0;c<s;++c)for(var l=n[c],u=r[c],h=l.length,f=a[c]=new Array(h),d,m=0;m<h;++m)(d=l[m]||u[m])&&(f[m]=d);for(;c<i;++c)a[c]=n[c];return new k(a,this._parents)}function xr(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function yr(t){t||(t=_r);function e(h,f){return h&&f?t(h.__data__,f.__data__):!h-!f}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,c=i[o]=new Array(a),l,u=0;u<a;++u)(l=s[u])&&(c[u]=l);c.sort(e)}return new k(i,this._parents).order()}function _r(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function wr(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function vr(){return Array.from(this)}function br(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function Mr(){let t=0;for(const e of this)++t;return t}function Ar(){return!this.node()}function $r(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&t.call(a,a.__data__,o,i);return this}function Er(t){return function(){this.removeAttribute(t)}}function kr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Nr(t,e){return function(){this.setAttribute(t,e)}}function Sr(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Cr(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Pr(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Tr(t,e){var n=he(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?kr:Er:typeof e=="function"?n.local?Pr:Cr:n.local?Sr:Nr)(n,e))}function me(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function zr(t){return function(){this.style.removeProperty(t)}}function Lr(t,e,n){return function(){this.style.setProperty(t,e,n)}}function qr(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Rr(t,e,n){return arguments.length>1?this.each((e==null?zr:typeof e=="function"?qr:Lr)(t,e,n??"")):Fr(this.node(),t)}function Fr(t,e){return t.style.getPropertyValue(e)||me(t).getComputedStyle(t,null).getPropertyValue(e)}function Hr(t){return function(){delete this[t]}}function Ir(t,e){return function(){this[t]=e}}function Vr(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Dr(t,e){return arguments.length>1?this.each((e==null?Hr:typeof e=="function"?Vr:Ir)(t,e)):this.node()[t]}function xe(t){return t.trim().split(/^|\s+/)}function Ct(t){return t.classList||new ye(t)}function ye(t){this._node=t,this._names=xe(t.getAttribute("class")||"")}ye.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function _e(t,e){for(var n=Ct(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function we(t,e){for(var n=Ct(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Or(t){return function(){_e(this,t)}}function Br(t){return function(){we(this,t)}}function Ur(t,e){return function(){(e.apply(this,arguments)?_e:we)(this,t)}}function Xr(t,e){var n=xe(t+"");if(arguments.length<2){for(var r=Ct(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Ur:e?Or:Br)(n,e))}function Gr(){this.textContent=""}function Yr(t){return function(){this.textContent=t}}function Kr(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Zr(t){return arguments.length?this.each(t==null?Gr:(typeof t=="function"?Kr:Yr)(t)):this.node().textContent}function Qr(){this.innerHTML=""}function Wr(t){return function(){this.innerHTML=t}}function Jr(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function jr(t){return arguments.length?this.each(t==null?Qr:(typeof t=="function"?Jr:Wr)(t)):this.node().innerHTML}function ti(){this.nextSibling&&this.parentNode.appendChild(this)}function ei(){return this.each(ti)}function ni(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ri(){return this.each(ni)}function ii(t){var e=typeof t=="function"?t:St(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function oi(){return null}function si(t,e){var n=typeof t=="function"?t:St(t),r=e==null?oi:typeof e=="function"?e:de(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ai(){var t=this.parentNode;t&&t.removeChild(this)}function ci(){return this.each(ai)}function li(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ui(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function fi(t){return this.select(t?ui:li)}function hi(t){return arguments.length?this.property("__data__",t):this.node().__data__}function di(t){return function(e){t.call(this,e,this.__data__)}}function gi(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function pi(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function mi(t,e,n){return function(){var r=this.__on,i,o=di(e);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function xi(t,e,n){var r=gi(t+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,l=a.length,u;c<l;++c)for(i=0,u=a[c];i<o;++i)if((s=r[i]).type===u.type&&s.name===u.name)return u.value}return}for(a=e?mi:pi,i=0;i<o;++i)this.each(a(r[i],e,n));return this}function ve(t,e,n){var r=me(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function yi(t,e){return function(){return ve(this,t,e)}}function _i(t,e){return function(){return ve(this,t,e.apply(this,arguments))}}function wi(t,e){return this.each((typeof e=="function"?_i:yi)(t,e))}function*vi(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var bi=[null];function k(t,e){this._groups=t,this._parents=e}function Mi(){return this}k.prototype={constructor:k,select:Xn,selectAll:Qn,selectChild:er,selectChildren:or,filter:sr,data:hr,enter:ar,exit:gr,join:pr,merge:mr,selection:Mi,order:xr,sort:yr,call:wr,nodes:vr,node:br,size:Mr,empty:Ar,each:$r,attr:Tr,style:Rr,property:Dr,classed:Xr,text:Zr,html:jr,raise:ei,lower:ri,append:ii,insert:si,remove:ci,clone:fi,datum:hi,on:xi,dispatch:wi,[Symbol.iterator]:vi};function Pt(t){return typeof t=="string"?new k([[document.querySelector(t)]],[document.documentElement]):new k([[t]],bi)}function be(t){return Pt(St(t).call(document.documentElement))}function B(t){return function(){return t}}const vt=Math.PI,bt=2*vt,F=1e-6,Ai=bt-F;function Me(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function $i(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Me;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Ei{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Me:$i(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,c=r-e,l=i-n,u=s-e,h=a-n,f=u*u+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>F)if(!(Math.abs(h*c-l*u)>F)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let d=r-s,m=i-a,E=c*c+l*l,b=d*d+m*m,M=Math.sqrt(E),_=Math.sqrt(f),y=o*Math.tan((vt-Math.acos((E+f-b)/(2*M*_)))/2),A=y/_,x=y/M;Math.abs(A-1)>F&&this._append`L${e+A*u},${n+A*h}`,this._append`A${o},${o},0,0,${+(h*d>u*m)},${this._x1=e+x*c},${this._y1=n+x*l}`}}arc(e,n,r,i,o,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),c=r*Math.sin(i),l=e+a,u=n+c,h=1^s,f=s?i-o:o-i;this._x1===null?this._append`M${l},${u}`:(Math.abs(this._x1-l)>F||Math.abs(this._y1-u)>F)&&this._append`L${l},${u}`,r&&(f<0&&(f=f%bt+bt),f>Ai?this._append`A${r},${r},0,1,${h},${e-a},${n-c}A${r},${r},0,1,${h},${this._x1=l},${this._y1=u}`:f>F&&this._append`A${r},${r},0,${+(f>=vt)},${h},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function ki(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Ei(e)}function Ni(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ae(t){this._context=t}Ae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Si(t){return new Ae(t)}function Ci(t){return t[0]}function Pi(t){return t[1]}function Ti(t,e){var n=B(!0),r=null,i=Si,o=null,s=ki(a);t=typeof t=="function"?t:t===void 0?Ci:B(t),e=typeof e=="function"?e:e===void 0?Pi:B(e);function a(c){var l,u=(c=Ni(c)).length,h,f=!1,d;for(r==null&&(o=i(d=s())),l=0;l<=u;++l)!(l<u&&n(h=c[l],l,c))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+t(h,l,c),+e(h,l,c));if(d)return o=null,d+""||null}return a.x=function(c){return arguments.length?(t=typeof c=="function"?c:B(+c),a):t},a.y=function(c){return arguments.length?(e=typeof c=="function"?c:B(+c),a):e},a.defined=function(c){return arguments.length?(n=typeof c=="function"?c:B(!!c),a):n},a.curve=function(c){return arguments.length?(i=c,r!=null&&(o=i(r)),a):i},a.context=function(c){return arguments.length?(c==null?r=o=null:o=i(r=c),a):r},a}function Wt(){}function $e(t){this._context=t}$e.prototype={areaStart:Wt,areaEnd:Wt,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function zi(t){return new $e(t)}class Li extends fe{constructor(n,r){super(n);p(this,"data");p(this,"svg");p(this,"axisContainer");p(this,"gridContainer");p(this,"g");p(this,"scales");p(this,"radius",200);p(this,"margins",{top:20,right:20,bottom:20,left:20});p(this,"pathsPool",new Map);p(this,"lineGenerator",Ti().x(([n,r])=>{const i=this.scales.get(n);return this.radialToCartesian(i.angle,r,i.scale).x}).y(([n,r])=>{const i=this.scales.get(n);return this.radialToCartesian(i.angle,r,i.scale).y}).curve(zi));this.data=r,this.svg=be("svg").attr("width","100%").attr("height","100%"),this.gridContainer=this.svg.append("g").attr("stroke","#95a5a6").attr("stroke-opacity",.2).attr("fill","none"),this.axisContainer=this.svg.append("g").attr("stroke","#000").attr("stroke-opacity",.2),this.g=this.svg.append("g").attr("stroke-opacity",1).attr("fill","none").attr("stroke-width",2),this.scales=new Map([["economy",{scale:P().domain(C(this.data,i=>i.economy)),angle:0}],["cylinders",{scale:P().domain(C(this.data,i=>i.cylinders)),angle:51}],["displacement",{scale:P().domain(C(this.data,i=>i.displacement)),angle:102}],["power",{scale:P().domain(C(this.data,i=>i.power)),angle:153}],["weight",{scale:P().domain(C(this.data,i=>i.weight)),angle:204}],["speed",{scale:P().domain(C(this.data,i=>i.speed)),angle:255}],["year",{scale:P().domain(C(this.data,i=>i.year)),angle:306}]]),this.container.append(this.svg.node()),setTimeout(this.update.bind(this),0)}update(){this.axisContainer.selectAll("line").data(this.scales).join("line").attr("stroke","white").attr("x1",this.width/2).attr("y1",this.height/2).attr("x2",([r,i])=>this.radialToCartesian(i.angle,G(i.scale.domain()),i.scale).x).attr("y2",([r,i])=>this.radialToCartesian(i.angle,G(i.scale.domain()),i.scale).y),this.axisContainer.selectAll("text").data(this.scales).join("text").attr("text-anchor","middle").attr("x",([r,i])=>this.radialToCartesian(i.angle,G(i.scale.domain()),i.scale).x).attr("y",([r,i])=>this.radialToCartesian(i.angle,G(i.scale.domain()),i.scale).y).text(([r])=>r);const n=[.25,.5,.75,1];this.gridContainer.selectAll("path").remove();for(const r of n){const i=[];for(const[o,{scale:s}]of this.scales)i.push([o,zt(s.domain())+(G(s.domain())-zt(s.domain()))*r]);this.gridContainer.append("path").attr("d",this.lineGenerator(i))}this.g.selectAll("path").remove();for(const[r,i]of this.pathsPool){const o=[];for(const[s]of this.scales)o.push([s,i[s]]);this.g.append("path").attr("d",this.lineGenerator(o)).attr("stroke",r)}}resize(){this.radius=Math.floor(Math.min(this.width/2-this.margins.right,this.height/2-this.margins.top)-10);for(const[,n]of this.scales)n.scale.range([0,this.radius]);this.update()}radialToCartesian(n,r,i){let o=Math.cos(n*Math.PI/180)*i(r),s=Math.sin(n*Math.PI/180)*i(r);return{x:this.width/2+o,y:this.height/2-s}}setPath(n,r){this.pathsPool.set(n,r),this.update()}removePath(n){this.pathsPool.delete(n),this.update()}}function qi(t){return t}var gt=1,pt=2,Mt=3,Y=4,Jt=1e-6;function Ri(t){return"translate("+t+",0)"}function Fi(t){return"translate(0,"+t+")"}function Hi(t){return e=>+t(e)}function Ii(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Vi(){return!this.__axis}function Ee(t,e){var n=[],r=null,i=null,o=6,s=6,a=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=t===gt||t===Y?-1:1,u=t===Y||t===pt?"x":"y",h=t===gt||t===Mt?Ri:Fi;function f(d){var m=r??(e.ticks?e.ticks.apply(e,n):e.domain()),E=i??(e.tickFormat?e.tickFormat.apply(e,n):qi),b=Math.max(o,0)+a,M=e.range(),_=+M[0]+c,y=+M[M.length-1]+c,A=(e.bandwidth?Ii:Hi)(e.copy(),c),x=d.selection?d.selection():d,q=x.selectAll(".domain").data([null]),N=x.selectAll(".tick").data(m,e).order(),V=N.exit(),D=N.enter().append("g").attr("class","tick"),R=N.select("line"),g=N.select("text");q=q.merge(q.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),N=N.merge(D),R=R.merge(D.append("line").attr("stroke","currentColor").attr(u+"2",l*o)),g=g.merge(D.append("text").attr("fill","currentColor").attr(u,l*b).attr("dy",t===gt?"0em":t===Mt?"0.71em":"0.32em")),d!==x&&(q=q.transition(d),N=N.transition(d),R=R.transition(d),g=g.transition(d),V=V.transition(d).attr("opacity",Jt).attr("transform",function(v){return isFinite(v=A(v))?h(v+c):this.getAttribute("transform")}),D.attr("opacity",Jt).attr("transform",function(v){var w=this.parentNode.__axis;return h((w&&isFinite(w=w(v))?w:A(v))+c)})),V.remove(),q.attr("d",t===Y||t===pt?s?"M"+l*s+","+_+"H"+c+"V"+y+"H"+l*s:"M"+c+","+_+"V"+y:s?"M"+_+","+l*s+"V"+c+"H"+y+"V"+l*s:"M"+_+","+c+"H"+y),N.attr("opacity",1).attr("transform",function(v){return h(A(v)+c)}),R.attr(u+"2",l*o),g.attr(u,l*b).text(E),x.filter(Vi).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===pt?"start":t===Y?"end":"middle"),x.each(function(){this.__axis=A})}return f.scale=function(d){return arguments.length?(e=d,f):e},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),f):n.slice()},f.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),f):r&&r.slice()},f.tickFormat=function(d){return arguments.length?(i=d,f):i},f.tickSize=function(d){return arguments.length?(o=s=+d,f):o},f.tickSizeInner=function(d){return arguments.length?(o=+d,f):o},f.tickSizeOuter=function(d){return arguments.length?(s=+d,f):s},f.tickPadding=function(d){return arguments.length?(a=+d,f):a},f.offset=function(d){return arguments.length?(c=+d,f):c},f}function Di(t){return Ee(Mt,t)}function Oi(t){return Ee(Y,t)}class Bi extends fe{constructor(n,r,i){super(n);p(this,"data");p(this,"svg");p(this,"g");p(this,"x");p(this,"y");p(this,"radius");p(this,"margins",{top:30,right:30,bottom:50,left:80});p(this,"xAxisEncoder");p(this,"xAxisTitle");p(this,"yAxisEncoder");p(this,"yAxisTitle");p(this,"sizeEncoder");p(this,"sizeTitle");p(this,"selectionPool",new Map([["red",void 0],["green",void 0],["blue",void 0],["orange",void 0],["yellow",void 0]]));this.data=r,this.svg=be("svg").attr("width","100%").attr("height","100%"),this.g=this.svg.append("g").attr("stroke","#000").attr("stroke-opacity",.2),this.x=P(),this.y=P(),this.radius=Dn().range([2,8]),this.container.append(this.svg.node()),this.xAxisEncoder=i.xAxisEncoder,this.xAxisTitle=i.xAxisTitle,this.yAxisEncoder=i.yAxisEncoder,this.yAxisTitle=i.yAxisTitle,this.sizeEncoder=i.sizeEncoder,this.sizeTitle=i.sizeTitle,setTimeout(this.update.bind(this),0),document.addEventListener("deselection",o=>this.onDeselection(o.detail.color))}setXAxisEncoder(n,r){this.xAxisEncoder=n,this.xAxisTitle=r,this.update()}setYAxisEncoder(n,r){this.yAxisEncoder=n,this.yAxisTitle=r,this.update()}setSizeEncoder(n,r){this.sizeEncoder=n,this.sizeTitle=r,this.update()}update(){this.x.domain(C(this.data,this.xAxisEncoder)),this.y.domain(C(this.data,this.yAxisEncoder)),this.radius.domain(C(this.data,this.sizeEncoder)),this.svg.select("g.x-axis").remove(),this.svg.append("g").attr("class","x-axis").attr("transform",`translate(0,${this.height-this.margins.bottom})`).call(Di(this.x)).call(n=>n.append("text").attr("text-anchor","end").attr("x",this.width-this.margins.right).attr("y",this.margins.bottom-15).text(`→ ${this.xAxisTitle}`)).call(n=>n.selectAll(".tick line").clone().attr("y2",-this.height+this.margins.bottom+this.margins.top).attr("stroke-opacity",.1)),this.svg.select("g.y-axis").remove(),this.svg.append("g").attr("class","y-axis").attr("transform",`translate(${this.margins.left},0)`).call(Oi(this.y)).call(n=>n.append("text").attr("text-anchor","start").attr("x",-this.margins.left+10).attr("y",15).text(`↑ ${this.yAxisTitle}`)),this.g.selectAll("circle").data(this.data).join("circle").attr("fill","#95a5a6").attr("opacity",.5).attr("cx",n=>this.x(this.xAxisEncoder(n))).attr("cy",n=>this.y(this.yAxisEncoder(n))).attr("r",n=>this.radius(this.sizeEncoder(n))).on("click",this.onSelection.bind(this))}resize(){this.x.range([this.margins.left,this.width-this.margins.right]),this.y.range([this.height-this.margins.bottom,this.margins.top]),this.update()}onSelection(n,r){for(const[i,o]of this.selectionPool)if(o==null){const s=Pt(n.currentTarget);this.selectionPool.set(i,s),document.dispatchEvent(new CustomEvent("selection",{detail:{data:r,color:i}})),s.attr("fill",i).attr("opacity",1);return}}onDeselection(n){let r=this.selectionPool.get(n);r&&(r.attr("fill","#95a5a6").attr("opacity",.5),this.selectionPool.set(n,void 0))}}class Ui{constructor(e,n){p(this,"container");p(this,"data");this.container=e,this.data=n,this.createTable()}createTable(){const e=Pt(this.container).append("table");e.append("thead").append("tr").selectAll("th").data(Object.keys(this.data[0])).join("th").text(n=>n),e.append("tbody").selectAll("tr").data(this.data).join("tr").selectAll("td").data(n=>Object.values(n)).join("td").text(n=>n)}}const At=document.querySelector("#csv-dataset-importer");if(At==null)throw new Error("couldn't find the CSV dataset importer");const ke=document.querySelector("#import-btn");if(ke==null)throw new Error("couldn't find the import button");const Ne=document.querySelector("#table-container");if(Ne==null)throw new Error("couldn't find the table container");const Se=document.querySelector("#scatterplot-container");if(Se==null)throw new Error("couldn't find the scatterplot container");const Ce=document.querySelector("#radar-chart-container");if(Ce==null)throw new Error("couldn't find the radar chart container");const Pe=document.querySelector("#x-axis-encoder-select");if(Pe==null)throw new Error;const Te=document.querySelector("#y-axis-encoder-select");if(Te==null)throw new Error;const ze=document.querySelector("#size-encoder-select");if(ze==null)throw new Error;const Le=document.querySelector("#legend-container");if(Le==null)throw new Error;const Xi=new Fe(Le);ke.addEventListener("click",async()=>{var r;if(!((r=At.files)!=null&&r.length)){alert("Please select a .csv dataset then click on import.");return}const t=await He(At.files[0]);new Ui(Ne,t);const e=new Bi(Se,t,{xAxisEncoder:i=>i.weight,xAxisTitle:"weight",yAxisEncoder:i=>i.economy,yAxisTitle:"economy",sizeEncoder:i=>i.cylinders,sizeTitle:"cylinders"});Pe.addEventListener("change",i=>{const o=i.currentTarget.value;e.setXAxisEncoder(s=>s[o],o)}),Te.addEventListener("change",i=>{const o=i.currentTarget.value;e.setYAxisEncoder(s=>s[o],o)}),ze.addEventListener("change",i=>{const o=i.currentTarget.value;e.setSizeEncoder(s=>s[o],o)});const n=new Li(Ce,t);document.addEventListener("selection",i=>{Xi.addEntry(i.detail.color,i.detail.data),n.setPath(i.detail.color,i.detail.data)}),document.addEventListener("deselection",i=>{n.removePath(i.detail.color)})});
</script>
  <style rel="stylesheet" crossorigin>html,body{font-family:sans-serif;color:#dcdde1;background-color:#3c3c3c;font-size:.8rem;margin:0;height:100%;display:flex;flex-direction:column;gap:5px}#dataset-importer-container{display:flex;flex-direction:row;justify-content:space-between;gap:10px;align-items:baseline;padding:5px 10px;border-style:hidden;background-color:#262626}#visualizations-container{display:flex;flex-direction:row;justify-content:space-around;flex:1;gap:5px;height:75%}#table-container{width:50%;max-height:100%;overflow-y:scroll}table{width:100%}tr:nth-child(2n){background-color:#4b4b4b}tr:hover{background-color:#ddd;color:#4b4b4b}#right-side-container{width:50%}#right-side-top-container{height:50%;display:flex;flex-direction:column;gap:5px}#right-side-bottom-container{height:50%}#scatterplot-input{display:flex;flex-direction:row;justify-content:space-evenly;align-items:baseline}#legend-container{display:flex;flex-direction:column;justify-content:flex-start;align-items:stretch;gap:5px;height:20%;flex-wrap:wrap;align-content:stretch}.legend-entry{display:flex;flex-direction:row;gap:10px;align-items:center;border:aliceblue;border-style:solid;border-width:thin;padding:5px}.legend-entry>div{background-color:#00f;border-radius:5px;height:10px;width:10px}.legend-entry>button{width:20px;height:20px;font-size:10px;font-weight:700;background-color:transparent;color:#fff;border-radius:5px}#import-btn,#csv-dataset-importer{flex-grow:1}#scatterplot-container{height:85%}text{fill:#dcdde1}.hoverable:hover{stroke:#f5f6fa;stroke-width:2px}button{background-color:#fff;border:1px solid #d5d9d9;color:#0f1111;cursor:pointer;display:inline-block;font-family:sans-serif;position:relative;text-align:center;text-decoration:none;user-select:none;-webkit-user-select:none;touch-action:manipulation;vertical-align:middle;width:100px}button:hover{background-color:#0c76cc;border-color:#0c76cc;color:#d5d9d9}button:focus{border-color:#0c76cc}th{border:"1px black solid";padding:"5px";background-color:"lightgray";font-weight:"bold";text-transform:"uppercase"}#right-side-bottom-container{display:flex;flex-direction:column;gap:10px}#radar-chart-container{flex-grow:1}
</style>
</head>

<body>
    <div id="dataset-importer-container">
        <!-- dataset importer(s) go(es) here -->
        <label for="csv-dataset-importer">
            Select .csv(.zip) UK Accidents Dataset:
        </label>
        <input id="csv-dataset-importer" type="file" accept=".csv" />
        <button id="import-btn">
            Import
        </button>
    </div>
    <div id="visualizations-container">
        <div id="table-container"></div>
        <div id="right-side-container">
            <div id="right-side-top-container">
                <div id="scatterplot-input">
                    <label for="x-axis-encoder-select">X Axis Encoder:</label>
                    <select name="x-axis-encoder" id="x-axis-encoder-select">
                        <option value="weight">weight</option>
                        <option value="economy">economy</option>
                        <option value="cylinders">cylinders</option>
                        <option value="displacement">displacement</option>
                        <option value="power">power</option>
                        <option value="speed">speed</option>
                        <option value="year">year</option>
                    </select>
                    <label for="y-axis-encoder-select">Y Axis Encoder:</label>
                    <select name="y-axis-encoder" id="y-axis-encoder-select">
                        <option value="economy">economy</option>
                        <option value="cylinders">cylinders</option>
                        <option value="displacement">displacement</option>
                        <option value="power">power</option>
                        <option value="weight">weight</option>
                        <option value="speed">speed</option>
                        <option value="year">year</option>
                    </select>
                    <label for="size-encoder-select">Size Encoder:</label>
                    <select name="size-encoder" id="size-encoder-select">
                        <option value="cylinders">cylinders</option>
                        <option value="economy">economy</option>
                        <option value="displacement">displacement</option>
                        <option value="power">power</option>
                        <option value="weight">weight</option>
                        <option value="speed">speed</option>
                        <option value="year">year</option>
                    </select>
                </div>
                <div id="scatterplot-container"></div>
            </div>
            <div id="right-side-bottom-container">
                <div id="radar-chart-container"></div>
                <div id="legend-container">
                </div>
            </div>
        </div>
    </div>
</body>

</html>